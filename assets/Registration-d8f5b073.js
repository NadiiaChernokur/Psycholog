import{r as n,a as S,u as k,j as e,s as l,i as P}from"./index-168afcfc.js";import{c as R,a as d,u as b,Q as C,O as E,o as L,B as $}from"./ReactToastify-0f5d058d.js";import{R as B,a as T,b as q,c as I,d as N,e as c,f as O,P as m,g as D}from"./Registration.styled-6b0e4324.js";const F=R().shape({name:d().required(),email:d().email().required(),password:d().min(6).required()}),H=()=>{const[r,g]=n.useState(!1),[u,p]=n.useState(""),x=S(),t=k();n.useEffect(()=>{const s=i=>{i.key==="Escape"&&t("/")};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[t]);const{register:o,handleSubmit:f,formState:{errors:a}}=b({resolver:L(F)}),w=async s=>{const i=await x(P(s));if(localStorage.setItem("emailPsych",JSON.stringify(s.email)),i.payload==="This address already exists. Log in"){$("This address already exists. Log in");return}else t("/login")},j=()=>{t("/")},y=s=>{s.target===s.currentTarget&&t("/")},v=s=>{p(s.target.value)},h=()=>{g(!r)};return e.jsxs(B,{onClick:y,children:[e.jsx(C,{toastStyle:{background:"#fc0317",color:"white"}}),e.jsxs(T,{children:[e.jsx(E,{onClick:j,children:e.jsx("svg",{width:"32",height:"32",children:e.jsx("use",{href:`${l}#out`})})}),e.jsx(q,{children:"Registration"}),e.jsx(I,{children:"Thank you for your interest in our platform! In order to register, we need some information. Please provide us with the following information."}),e.jsxs(N,{onSubmit:f(w),children:[e.jsxs("div",{children:[e.jsx(c,{type:"name",...o("name"),placeholder:"Name"}),a.name&&e.jsx("span",{style:{color:"#f71b2e"},children:a.name.message})]}),e.jsxs("div",{children:[e.jsx(c,{type:"email",...o("email"),placeholder:"Email"}),a.email&&e.jsx("span",{style:{color:"#f71b2e"},children:a.email.message})]}),e.jsxs(O,{children:[e.jsx(c,{type:r?"text":"password",...o("password"),placeholder:"Password",value:u,onChange:v}),a.password&&e.jsx("span",{style:{color:"#f71b2e"},children:a.password.message}),r?e.jsx(m,{width:"20",height:"20",onClick:h,children:e.jsx("use",{href:`${l}#eye`})}):e.jsx(m,{width:"20",height:"20",onClick:h,children:e.jsx("use",{href:`${l}#eye-off`})})]}),e.jsx(D,{type:"submit",children:"Sign Up"})]})]})]})};export{H as default};
